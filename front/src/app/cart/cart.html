<div class="container-fluid bg-dark text-white min-vh-100 p-3 p-md-5">
  <div class="d-flex justify-content-between align-items-center mb-5">
    <h2 class="text-warning fw-bold mb-0">üõí Mon Panier</h2>
    <a routerLink="/stocks" class="btn btn-outline-light">
      <i class="bi bi-arrow-left me-2"></i>Retour √† la boutique
    </a>
  </div>

  <div *ngIf="cartItems.length === 0" class="text-center py-5">
    <div class="fs-1 text-muted mb-3">üêù</div>
    <h3>Votre panier est vide</h3>
    <p class="text-white-50">Allez vite choisir du bon miel !</p>
    <a routerLink="/stocks" class="btn btn-warning fw-bold mt-3">Voir les miels</a>
  </div>

  <div *ngIf="cartItems.length > 0" class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card bg-secondary border-0 mb-4" style="--bs-bg-opacity: 0.2">
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-dark table-hover mb-0 align-middle">
              <thead class="text-warning">
                <tr>
                  <th class="ps-4">Produit</th>
                  <th class="text-center">Quantit√©</th>
                  <th class="text-end">Prix Unit.</th>
                  <th class="text-end pe-4">Total</th>
                  <th></th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of cartItems">
                  <td class="ps-4">
                    <div class="fw-bold">
                      {{ item.type_miel }}
                      <span class="badge bg-secondary text-light ms-1 small">{{
                        item.type_pot
                      }}</span>
                    </div>
                    <small style="color: #9ca3af">R√©colte {{ item.annee }}</small>
                  </td>

                  <td class="text-center">
                    <span class="badge bg-dark border border-secondary fs-6">
                      {{ item.quantity }}
                    </span>
                  </td>

                  <td class="text-end">{{ item.prix_unitaire | number: '1.2-2' }} ‚Ç¨</td>

                  <td class="text-end pe-4 fw-bold text-warning">
                    {{ item.prix_unitaire * item.quantity | number: '1.2-2' }} ‚Ç¨
                  </td>

                  <td class="text-end pe-3">
                    <button
                      class="btn btn-sm btn-outline-danger border-0"
                      (click)="supprimer(item.id)"
                    >
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="card bg-dark border-warning shadow-lg">
        <div class="card-body p-4">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <span class="fs-4 text-white-50">Total √† payer</span>
            <span class="display-6 fw-bold text-warning">{{ total | number: '1.2-2' }} ‚Ç¨</span>
          </div>
          <button class="btn btn-warning w-100 fw-bold py-3 fs-5" (click)="demanderValidation()">
            ‚úÖ Valider ma commande
          </button>
        </div>
      </div>
      <app-confirm-modal
        [isOpen]="isModalOpen"
        [title]="modalTitle"
        [message]="modalMessage"
        [actionLabel]="modalButtonText"
        [colorType]="modalType"
        (confirm)="onModalConfirm()"
        (cancel)="isModalOpen = false"
      ></app-confirm-modal>
    </div>
  </div>
</div>
